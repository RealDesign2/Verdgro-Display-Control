<!-- Slider -->

<link rel="Stylesheet" type="text/css" href="css/smoothTouchScroll.css" />		
<style type="text/css">

	#touchScroller
	{
		width:100%;
		height: 220px;
		position: relative;
	}
		
	#touchScroller div.scrollableArea div
	{
		position: relative;
		float: left;
		margin: 0;
		padding: 0 5px;
		/* If you don't want the images in the scroller to be selectable, try the following
		   block of code. It's just a nice feature that prevent the images from
		   accidentally becoming selected/inverted when the user interacts with the scroller. */
		-webkit-user-select: none;
		-khtml-user-select: none;
		-moz-user-select: none;
		-o-user-select: none;
		user-select: none;
	}	
	
	#touchScroller2
	{
		width:100%;
		height: 260px;
		position: relative;
	}
		
	#touchScroller2 div.scrollableArea div
	{
		position: relative;
		float: left;
		margin: 0;
		padding: 0 5px;
		/* If you don't want the images in the scroller to be selectable, try the following
		   block of code. It's just a nice feature that prevent the images from
		   accidentally becoming selected/inverted when the user interacts with the scroller. */
		-webkit-user-select: none;
		-khtml-user-select: none;
		-moz-user-select: none;
		-o-user-select: none;
		user-select: none;
	}	
</style>		
		
<script src="js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="js/jquery.kinetic.min.js"></script>
<script src="js/jquery.smoothTouchScroll.min.js"></script>

<!-- Pop up menus -->

<div id="popupMenu" data-role="popup" data-theme="b">
        <ul style="min-width: 210px;" data-role="listview" data-theme="b" data-inset="true">            
            <li data-role="divider" data-theme="b"><span id="MenuPortalAction">Choose an action</span></li>
            <li><a href="#" onclick="PortalGetImage();"><span id="MenuPortalToLocalLibrary">Send to local Library</span></a></li>
            <li><a href="#" onclick="$('#popupMenu').popup('close'); sClickedImageID='';"><span id="MenuPortalCancel">Cancel</span></a></li>            
        </ul>
</div>

<div id="popupMenuLocal" data-role="popup" data-theme="b">
        <ul style="min-width: 210px;" data-role="listview" data-theme="b" data-inset="true">            
            <li data-role="divider" data-theme="b"><span id="MenuLocalAction">Choose an action</span></li>
            <li><a href="#" onclick="LocalSendToShow();"><span id="MenuLocalToShow">Send to show</span></a></li>
			<li><a href="#" onclick="LocalSendToScreen();"><span id="MenuLocalToScreen">Send direct to screen</span></a></li>
			<li><a href="#" onclick="LocalDelete();"><span id="MenuLocalDelete">Delete</span></a></li>
            <li><a href="#" onclick="$('#popupMenuLocal').popup('close'); sClickedImageID='';"><span id="MenuLocalCancel">Cancel</span></a></li>            
        </ul>
</div>


<!-- /Pop up menus -->

<div id="tabs" data-role="tabs">
  <div class="ui-grid-a">
    <div class="ui-block-a"><a href="#" class="ui-shadow ui-btn ui-corner-all" onClick="switchTab('tabOne');"><span id="DirectTabStatus">Status</span></a></div>
    <div class="ui-block-b"><a href="#" class="ui-shadow ui-btn ui-corner-all" onClick="switchTab('tabTwo');"><span id="DirectTabEditShow">Edit Show</span></a></div>    
</div>
  <div class="ui-body-d ui-content" id="tabOne">    
	
	<div data-role="collapsible" data-collapsed="false">
		<h3><span id="DirectCurrentShow">Current Show</span></h3>
		<button type="button" data-icon="carat-r"   data-iconpos="left" data-mini="true" data-inline="true" onClick="QSPlay();"><span id="DirectButtonPlay">Play</span></button>
		<button type="button" data-icon="forbidden" data-iconpos="left" data-mini="true" data-inline="true" onClick="QSPause();"><span id="DirectButtonPause">Pause</span></button>	
		<div id="touchScroller">
			<br><br><span id="DirectNoCurrentShow">No Current show available</span><br><br>
		</div> <!-- /Touchscroller -->
		
		<button type="button" data-icon="refresh" data-iconpos="left" data-mini="true" data-inline="true" onClick="loadURL('internal/direct.html');" id="cmdRefresh"><span id="DirectButtonRefresh">Refresh</span></button>	
		<!--
		<button type="button" data-icon="edit" data-iconpos="left" data-mini="true" data-inline="true" onClick="confirm('Are you sure? \nThe current show will be overwritten.');"><span id="DirectButtonEditShow">Edit this show</span></button>	
		-->
	</div>
	
	<div data-role="collapsible" >
		<h3><span id="DirectController">Controller</span></h3>
		<table>
			<tr>
				<td><b><span id="StatusBrightnessMode">Brightness mode</span></b></td>
				<td><span id="ControllerBrightnessMode">-</span></td>
			</tr>
			<tr>
				<td><b><span id="StatusBrightnessValue">Brightness value</span></b></td>
				<td><span id="ControllerBrightnessValue">-</span></td>
			</tr>
			<!--
			<tr>
				<td><b>Freeze</b></td>
				<td><span id="ControllerFreeze">-</span></td>
			</tr>
			-->
			<tr>
				<td><b><span id="StatusPowermode">Powermode / Pause</span></b></td>
				<td><span id="ControllerPowerState">-</span></td>
			</tr>
		</table>
		<button type="button" data-icon="refresh" data-iconpos="left" data-mini="true" data-inline="true" onClick="GetCurentControllerStatus();"><span id="StatusControllerButtonRefresh">Refresh</span></button>		
	</div>
	
	<div data-role="collapsible" >
		<h3><span id="DirectDisplay">Display</span></h3>
		<table>
			<tr>
				<td><b><span id="StatusDisplayName">Name</span></b></td>
				<td>Next release</td>
			</tr>
			<tr>
				<td><b><span id="StatusDisplayScreensize">Screensize (w x h)</span></b></td>
				<td>Next release</td>
			</tr>
			<tr>
				<td><b><span id="StatusDisplayPixeldetection">Pixeldetection</span></b></td>
				<td>Not supported</td>
			</tr>			
		</table>
		<button type="button" data-icon="refresh" data-iconpos="left" data-mini="true" data-inline="true" onClick=""><span id="StatusShowButtonRefresh">Refresh</span></button>
	</div>
	
  </div>
  
  <!-- tabTwo -->
  <div class="ui-body-d ui-content" id="tabTwo">
	<!-- Accordion -->
	<div id="colShow" data-role="collapsible" data-collapsed="false">
		<h3>Show editor</h3>
		<div id="touchScroller2">
			<br><br>Your show is empty<br><br>
		</div> <!-- /Touchscroller2-->
		<button type="button" data-icon="action" data-iconpos="left" data-mini="true" data-inline="true" onClick="SendShow();"><span id="ShowButtonSendShow">Send show to display and play</span></button>
		<button type="button" data-icon="action" data-iconpos="left" data-mini="true" data-inline="true" onClick="ClearShow();"><span id="ShowButtonClearShow">Clear complete show</span></button>
	</div>
	<div data-role="collapsible" data-collapsed="false">
        <h3><span id="TabLocal">Library (local)</span></h3>
		<div id="LibraryContainer"></div>
    </div>
	
    <div data-role="collapsible">
        <h3><span id="TabPortal">Library (portal)</span></h3>
		<button type="button" data-icon="refresh" data-iconpos="left" data-mini="true" data-inline="true" onClick="GetLibraryPortal()"><span id="ButtonRefresh">Refresh</span></button>	
		<div id="LibraryContainerOnline"></div>
    </div>	
  </div>
  
  
  
</div>


<script>
	//Layout
	//eerste tab selecteren (#TODO)
	$("#tabOne").addClass('ui-btn-active');
	$("#idpage").page();
	//Slider activeren
	//$(function() {
	//	$("#touchScroller").smoothTouchScroll({ continuousScrolling: false });
	//});
	
	
	//Knoppen
	$("#btnBack").show();	
	$("#btnHome").show();

	//Vertaling instellen.	
	$("#LibraryTitle").html(jLang.LibraryTitle);
	$("#TabLocal").html(jLang.LibraryTabLocal);
	$("#TabPortal").html(jLang.LibraryTabPortal);
	$("#MenuPortalAction").html(jLang.LibraryMenuPortalAction);
	$("#MenuPortalToLocalLibrary").html(jLang.LibraryMenuPortalToLocalLibrary);
	$("#MenuPortalCancel").html(jLang.Cancel);
	$("#MenuLocalAction").html(jLang.LibraryMenuLocalAction);
	$("#MenuLocalToShow").html(jLang.LibraryMenuLocalToShow);
	$("#MenuLocalToScreen").html(jLang.LibraryMenuLocalToScreen);
	$("#MenuLocalDelete").html(jLang.Delete);
	$("#MenuLocalCancel").html(jLang.Cancel);
	$("#ButtonRefresh").html(jLang.Refresh);
	$("#DirectTabEditShow").html(jLang.DirectTabEditShow);
	$("#DirectTabStatus").html(jLang.DirectTabStatus);		
	$("#DirectCurrentShow").html(jLang.DirectCurrentShow);	
	$("#DirectButtonPlay").html(jLang.DirectButtonPlay);	
	$("#DirectButtonPause").html(jLang.DirectButtonPause);	
	$("#DirectNoCurrentShow").html(jLang.DirectNoCurrentShow);	
	$("#DirectButtonRefresh").html(jLang.Refresh);	
	$("#DirectButtonEditShow").html(jLang.DirectButtonEditShow);
	$("#DirectController").html(jLang.DirectController);
	$("#DirectDisplay").html(jLang.DirectDisplay);	
	
	$("#StatusBrightnessMode").html(jLang.StatusBrightnessMode);
	$("#StatusBrightnessValue").html(jLang.StatusBrightnessValue);
	$("#StatusPowermode").html(jLang.StatusPowermode);
	$("#StatusControllerButtonRefresh").html(jLang.Refresh);
	$("#StatusDisplayName").html(jLang.StatusDisplayName);
	$("#StatusDisplayScreensize").html(jLang.StatusDisplayScreensize);
	$("#StatusDisplayPixeldetection").html(jLang.StatusDisplayPixeldetection);
	$("#StatusShowButtonRefresh").html(jLang.Refresh);
	
	$("#ShowButtonSendShow").html(jLang.ShowButtonSendShow);
	$("#ShowButtonClearShow").html(jLang.ShowButtonClearShow);
	
	//=================================================================================
	var sClickedImageID = "";
	var sUser = "";
	
	
	if (DirectShowTab == 'tabOne') {
		switchTab('tabOne');
	} else {
		switchTab('tabTwo');
	}
	
		
	GetLibrary();					//Lokale library inlezen
	GetCurentControllerStatus();	//Status controller ophalen	
	GetLibraryPortal();				//portal library ophalen
	GetCurentShow();				//Huidige show ophalen
	WriteShow();					//Te editen show in beeld zetten.
	 $( "#set" ).children( ":last" ).collapsible( "collapse" );
	
	//=================================================================================
	
	function switchTab(sTab) {
		$("#tabOne").hide();
		$("#tabTwo").hide();
		$("#" + sTab).show();
		DirectShowTab = sTab;
	} 
	
	//Functie die de library vanaf het netwerk haalt
	function GetLibraryPortal() {	
		//Leegmaken bibliotheek
		$("#LibraryContainerOnline").html("");
		
		var url = URLPortal + "app/LibraryRead.json.asp"
		var sResult = "";
		//alert(url);
		$.ajax(
			{
				//dataType: "json",
				url: url,
				encoding: "UTF-8",
				data: {"username" : appSettings.PortalUser, "password" : appSettings.PortalPass},
				async: false,
				timeout: 2000,
				cache: false
			})
			.done(function( data ) {
				sResult = "";
				sUser = data.user;	
				if (sUser.substring(0,4) != "Unkn"){
					if (data.files.length == 0) {
						sResult = "<br>" + jLang.LibraryNoItems + "<br><br>"
					} else {
						for (var i=0;i<data.files.length;i++)
						{ 
							sResult = sResult + "<img src='" + URLPortal + "library/" + data.user + "/" + data.files[i].file + "' onClick='PortalImageClick(this);'  id='img" + i + "'>&nbsp;&nbsp;"
						}
					}
					$("#LibraryContainerOnline").html(sResult);
				} else {
					$("#LibraryContainerOnline").html("<br>" + jLang.LibraryWrongCredentials + "<br><br>");
				} 
			})		
			.fail(function( jqXHR, textStatus ) {
				if (IsDebug == true) { 
					$("#LibraryContainerOnline").html("FAILURE (GetLibraryPortal)<br/>Status : " + jqXHR.status + "<br/>Message : " + jqXHR.responseText);
				} else {
					$("#LibraryContainerOnline").html("<br>" + jLang.LibraryNoInternet + "<br><br>");
				} 				
			}		
		);			
	} 	
	
	//Toont Internet Bibliotheek
	function GetLibrary() {
		var sResult = ""
		//$("#LibraryContainer").html(appSettings.Library.length)
		if (appSettings.Library.length == 0) {
			sResult = "<br>" + jLang.LibraryNoItems + "<br><br>"
		} else {
			for (var i=0;i<appSettings.Library.length;i++)
			{ 
				sResult = sResult + "<img src='" + appSettings.Library[i].base64 + "' style='width:80px;' alt='" + appSettings.Library[i].filename + "'onClick='LocalImageClick(this);'  id='imglocal" + i + "'>&nbsp;&nbsp;"
			}
		} 
		$("#LibraryContainer").html(sResult);
	} 
	
	function PortalImageClick(objElement) {
		//alert(objElement.id);
		sClickedImageID = objElement.id;
		var p = $("#" + objElement.id); 
		$( "#popupMenu" ).popup("open", {positionTo: '#' + objElement.id });
	}
	
	function LocalSendToShow() {
		if (appSettings.Slide.length < ShowDefaultSlideMax) {
			//Toevoegen van afbeelding aan de showedit
			var sId = sClickedImageID;
			sId = sId.replace("imglocal", "")		
			
			oDia = {	"filename" 		: appSettings.Library[parseInt(sId)].filename,
						"base64" 		: appSettings.Library[parseInt(sId)].base64,
						"duration"		: 5}
						
			//slide toevoegen
			appSettings.Slide.push(oDia);
			//show opslaan
			window.localStorage.appSettings = JSON.stringify(appSettings);
			//verversen van show.
			WriteShow(true);		
			$('#popupMenuLocal').popup('close');
		} else {
			alert(jLang.ShowMaxItemsReached);
		} 
	} 
	
	function LocalSendToScreen() {
		if (confirm(jLang.LibraryConfirmToSreen) == true) {			
			var sId = sClickedImageID;
			sId = sId.replace("imglocal", "")			
			sB64 = appSettings.Library[parseInt(sId)].base64;
			//mimetype eraf halen
			//sB64 = sB64.substring(sB64.indexOf(",")+1).toLowerCase();
			//Nieuwe show aanmaken
			var jShow = { "Slide" : [ { "filename" : "", "base64" : "", "duration" : ShowDefaultSlideTime}]}
			jShow.Slide[0].filename = appSettings.Library[parseInt(sId)].filename;
			jShow.Slide[0].base64 = sB64;
			var oResult = QSSendShow(jShow);
			if (oResult.OK == "true") {
				alert(jLang.LibraryShowSendedDirectly);
				//navigator.notification.alert(jLang.LibraryShowSendedDirectly, null, AlertTitle, 'OK');
				//goed gegaan, show verversen
				GetCurentShow();
			} else {
				if (IsDebug==true) {
					//gedeatileerde fout
					alert("Result LocalSendToScreen : " + oResult.data);
				} else {
					alert(jLang.LibraryShowSendedDirectlyError);
					//navigator.notification.alert(jLang.LibraryShowSendedDirectlyError, null, AlertTitle, 'OK');	
				}
			}
			
		} 
		$('#popupMenuLocal').popup('close');
	}
	
	function LocalDelete() {
		if (confirm(jLang.LibraryConfirmDelete) == true) {
			var sId = sClickedImageID;
			sId = sId.replace("imglocal", "")			
			//alert(sId);
			appSettings.Library.splice(parseInt(sId),1);
			//opslaan
			window.localStorage.appSettings = JSON.stringify(appSettings);	
			GetLibrary();
		} 
		$('#popupMenuLocal').popup('close');
	} 
	
	
	function LocalImageClick(objElement) {
		//alert(objElement.id);
		sClickedImageID = objElement.id;
		var p = $("#" + objElement.id); 
		$( "#popupMenuLocal" ).popup("open", {positionTo: '#' + objElement.id });
	}
	
	function PortalGetImage() {
		$('#popupMenu').popup('close');
		
		var sFile = $('#' + sClickedImageID).attr('src');
		var oImg = document.getElementById(sClickedImageID);	
		//toevoegen aan de library
		var jsonImage = { "filename": "", "base64" : ""} 
		jsonImage.filename = sFile.substring(sFile.lastIndexOf('/')+1);
		jsonImage.base64 = GetBase64FromImgObj(oImg)		
		appSettings.Library.push(jsonImage);
		//opslaan
		window.localStorage.appSettings = JSON.stringify(appSettings);		
		GetLibrary();
		navigator.notification.alert(jLang.LibraryAddedToLibrary, null, AlertTitle, 'OK');		
	} 
	
	//Get Current Show
	function GetCurentShow() {	
	
		var sURL = "";
		var sXML = "";
		//afhankelijk van type verbinding juiste URL opbouwen.	
		if (IsDirectConnect == true) {
			sURL = URLExternal.replace("<ip>", IPDirectConnect);		
		} else {
			sURL = URLExternal.replace("<ip>", "SomeIP");
		} 	
		sURL = sURL + 'Publish/PlayList.xml'
		//alert(sURL)
		//Indien het fout gaat ook een melding van geven.
		$.ajax(
			{
				url: sURL,
				encoding: "UTF-8",
				//type: "POST",
				type: "GET",
				timeout: AjaxControllerTimeout,
				data: {},
				async: false,
				dataType: 'text',
				//crossDomain: true,
				cache: false
			})
			.done(function( data ) {
				//alert(data);
				//alert($(data).find("root"));
				var jXML = $.xml2json(data, true);
				
				//alert(jXML.item.length);
				//navigator.notification.alert(jXML.item.length, null, AlertTitle, 'OK');
				var sHTML = "";
				if (IsDirectConnect == true) {
					sURL = URLExternal.replace("<ip>", IPDirectConnect);		
				} else {
					sURL = URLExternal.replace("<ip>", "SomeIP");
				} 	
				for (var i=0;i<jXML.item.length;i++) {
					sHTML = sHTML + '<div style="border:1px solid #000000; width:200px; height:200px; margin:4px; padding:4px; text-align:center; display: inline-block; border-radius: 0.9em;"> ';
					sHTML = sHTML + '	<b>' + (i+1) + '.</b><br> ';
					sHTML = sHTML + '	<img src="' + sURL +'Publish/' + jXML.item[i].fileName + '" style="max-width: 140px; max-height: 140px;"><br> ';
					sHTML = sHTML + '	Time : ' + jXML.item[i].duration + ' sec<br>	';
					sHTML = sHTML + '</div> ';
				}
				$("#touchScroller").html(sHTML);
				$("#touchScroller").smoothTouchScroll({ continuousScrolling: false, touchScrolling: true });	
				$("#touchScroller").smoothTouchScroll("recalculateScrollableArea");						
												
			
				//alert(jXML.root);
			})		
			.fail(function( jqXHR, textStatus ) {	
				alert(jLang.DirectErrorGettingPlaylist);	
			}
		);		
	} 
	
	
	
	function GetCurentControllerStatus() {
		//navigator.notification.alert('test', null, AlertTitle, 'OK');
		var oReturn;
		oReturn = ControllerGetBrightness();
		if (oReturn.OK == "true") {
			//alert(oReturn.data.type);
			//alert(oReturn.data.value);
			//alert(((100/256) * parseInt(oReturn.data.value)) + '%');
			$("#ControllerBrightnessMode").html(oReturn.data.type);
			$("#ControllerBrightnessValue").html(((100/256) * parseInt(oReturn.data.value)) + '%');	
			oReturn = ControllerGetPowerState();
			if (oReturn.OK == "true") {	
				//if (oReturn.data == "") {
				//	$("#ControllerPowerState").html("On");
				//} else {
				//	$("#ControllerPowerState").html("Off");
				//}
				$("#ControllerPowerState").html(oReturn.data);
				//ControllerPowerState ControllerFreeze
				
			} else {
				//navigator.notification.alert(oReturn.Data, null, AlertTitle +  ' - ERROR', 'OK');
				alert(oReturn.Data);
			} 
		} else {
			//navigator.notification.alert(oReturn.Data, null, AlertTitle +  ' - ERROR', 'OK');
			alert(oReturn.Data);
		} 
	} 
	
	function WriteShow(refresh) {
		//deze functie vult de huidige te editen show.
		var sHTML = "";
		
		if (appSettings.Slide.length > 0 ) {
			for (var i=0;i<appSettings.Slide.length;i++) {
				sHTML = sHTML + '<div style="border:1px solid #000000; width:200px; height:240px; margin:4px; padding:4px; text-align:center; display: inline-block; border-radius: 0.9em;"> ';
				sHTML = sHTML + '	<b>' + (i+1) + '.</b><br> ';
				//sHTML = sHTML + '	<img src="data:image/' + GetMimeFromUrl(appSettings.Slide[i].filename) + ';base64,'+ appSettings.Slide[i].base64 + '" style="max-width: 140px; max-height: 140px;"><br> ';				
				sHTML = sHTML + '	<button type="button" data-icon="minus" data-iconpos="notext" data-mini="true" data-inline="true" onClick="SlideMin('+ i + ');" id="SlideTimeMin' + i + '"></button>'
				sHTML = sHTML + '	<span id="SlideSec' + i +'">' + appSettings.Slide[i].duration + '</span> sec &nbsp;';
				sHTML = sHTML + '	<button type="button" data-icon="plus" data-iconpos="notext" data-mini="true" data-inline="true" onClick="SlidePlus('+ i + ');" id="SlideTimePlus' + i + '"></button><br>'
				sHTML = sHTML + '	<img src="'+ appSettings.Slide[i].base64 + '" style="max-width: 150px; max-height: 130px;"><br> ';
				sHTML = sHTML + '   <button type="button" data-icon="delete" data-iconpos="notext" data-inline="true" onClick="DeleteSlide(' + i + ');"></button> ';
				sHTML = sHTML + '</div> ';
			}			
		} else {
			sHTML = '<div style="width:300px"><br><br>' + jLang.ShowNoShowAvailabe + '<br><br></div>'
		}
		
		$("#touchScroller2").html(sHTML);
		$("#touchScroller2").smoothTouchScroll({ continuousScrolling: false, touchScrolling: true });
		
		//tijdelijke oplossing layout-verknalt na toevoegen.
		if (refresh == true) {
			loadURL('internal/direct.html');
		} 
		//if (appSettings.Slide.length > 4) {
			//refresh pagina ivm slide
			//$("#colShow" ).collapsibleset().trigger('create')
			//$("#colShow" ).trigger('create')
			//$("#touchScroller2").smoothTouchScroll("recalculateScrollableArea");
		//} 
	
	} 
	
	function ClearShow() {
		if (confirm(jLang.AreYouSure) == true) {
			appSettings.Slide = [];
			window.localStorage.appSettings = JSON.stringify(appSettings);
			WriteShow();
		} 
	} 
		
	function SendShow() {
		var oResult = QSSendShow(appSettings);
		if (oResult.OK == "true") {
			alert(jLang.LibraryShowSendedDirectly);
			//navigator.notification.alert(jLang.LibraryShowSendedDirectly, null, AlertTitle, 'OK');
			//goed gegaan, show verversen
			GetCurentShow();
		} else {
			if (IsDebug==true) {
				//gedeatileerde fout
				alert("Result LocalSendToScreen : " + oResult.data);
			} else {
				alert(jLang.LibraryShowSendedDirectlyError);
				//navigator.notification.alert(jLang.LibraryShowSendedDirectlyError, null, AlertTitle, 'OK');	
			}
		}
	} 
	
	function SlideMin(index) {
		if (appSettings.Slide[parseInt(index)].duration > 1) {
			appSettings.Slide[parseInt(index)].duration = parseInt(appSettings.Slide[parseInt(index)].duration) - 1;		
			$("#SlideSec" + index).html(appSettings.Slide[parseInt(index)].duration);
			window.localStorage.appSettings = JSON.stringify(appSettings);
		}
	} 
	
	function SlidePlus(index) { 
		if (appSettings.Slide[parseInt(index)].duration < 300) {
			appSettings.Slide[parseInt(index)].duration = parseInt(appSettings.Slide[parseInt(index)].duration) + 1;		
			$("#SlideSec" + index).html(appSettings.Slide[parseInt(index)].duration);
			window.localStorage.appSettings = JSON.stringify(appSettings);
		}
	} 
	
	function DeleteSlide(slideNumber) {
		if (confirm(jLang.AreYouSure) == true) {
			appSettings.Slide.splice(parseInt(slideNumber), 1);
			window.localStorage.appSettings = JSON.stringify(appSettings);
			if (appSettings.Slide.lenth == 0) {
				WriteShow();
			} else { 
				WriteShow(true);
			} 
			
		} 
	
	}
	
</script>